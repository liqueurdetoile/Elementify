<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>elements/query.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="elementify.Collection.html">Collection</a></li><li><a href="elementify.Element.html">Element</a></li><li><a href="HtmlElement.html">HtmlElement</a><ul class='methods'><li data-type='method'><a href="HtmlElement.html#~addClass">addClass</a></li><li data-type='method'><a href="HtmlElement.html#~after">after</a></li><li data-type='method'><a href="HtmlElement.html#~append">append</a></li><li data-type='method'><a href="HtmlElement.html#~attr">attr</a></li><li data-type='method'><a href="HtmlElement.html#~before">before</a></li><li data-type='method'><a href="HtmlElement.html#~child">child</a></li><li data-type='method'><a href="HtmlElement.html#~childs">childs</a></li><li data-type='method'><a href="HtmlElement.html#~clone">clone</a></li><li data-type='method'><a href="HtmlElement.html#~data">data</a></li><li data-type='method'><a href="HtmlElement.html#~display">display</a></li><li data-type='method'><a href="HtmlElement.html#~empty">empty</a></li><li data-type='method'><a href="HtmlElement.html#~fadeIn">fadeIn</a></li><li data-type='method'><a href="HtmlElement.html#~fadeIn">fadeIn</a></li><li data-type='method'><a href="HtmlElement.html#~forEach">forEach</a></li><li data-type='method'><a href="HtmlElement.html#~hasClass">hasClass</a></li><li data-type='method'><a href="HtmlElement.html#~hide">hide</a></li><li data-type='method'><a href="HtmlElement.html#~html">html</a></li><li data-type='method'><a href="HtmlElement.html#~matches">matches</a></li><li data-type='method'><a href="HtmlElement.html#~nextSibling">nextSibling</a></li><li data-type='method'><a href="HtmlElement.html#~nextSiblings">nextSiblings</a></li><li data-type='method'><a href="HtmlElement.html#~parent">parent</a></li><li data-type='method'><a href="HtmlElement.html#~parents">parents</a></li><li data-type='method'><a href="HtmlElement.html#~prepend">prepend</a></li><li data-type='method'><a href="HtmlElement.html#~previousSibling">previousSibling</a></li><li data-type='method'><a href="HtmlElement.html#~previousSiblings">previousSiblings</a></li><li data-type='method'><a href="HtmlElement.html#~remove">remove</a></li><li data-type='method'><a href="HtmlElement.html#~removeClass">removeClass</a></li><li data-type='method'><a href="HtmlElement.html#~shallow">shallow</a></li><li data-type='method'><a href="HtmlElement.html#~show">show</a></li><li data-type='method'><a href="HtmlElement.html#~show">show</a></li><li data-type='method'><a href="HtmlElement.html#~style">style</a></li><li data-type='method'><a href="HtmlElement.html#~toggleClass">toggleClass</a></li><li data-type='method'><a href="HtmlElement.html#~unwrap">unwrap</a></li><li data-type='method'><a href="HtmlElement.html#~wrap">wrap</a></li></ul></li><li><a href="module.html#.exports">exports</a></li></ul><h3>Namespaces</h3><ul><li><a href="elementify.html">elementify</a><ul class='methods'><li data-type='method'><a href="elementify.html#.Q">Q</a></li></ul></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<div id="main">
    
    <h1 class="page-title">elements/query.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
*  @file Query selector and enhancing elements
*/

import Element from 'elements/element';
import Collection from 'elements/collection';

/**
*  The &lt;tt>Q&lt;/tt> function can be used to create Elements,
*  Enhance nodes and query DOM or nodes.
*
*  #### query syntax
*
*  &lt;tt>Q&lt;/tt> will returns an empty collection if
*  no elements are found with the given query. A single HtmLElement (or extended
*  Form, FormElement) if there is only one result and a collection if
*  there is more than one result.
*
*  In query mode, the first parameter must be a valid CSS query selector :
*
*  &lt;ul>
*  &lt;li>#idname for single id search will trigger &lt;tt>getElementById&lt;/tt>&lt;/li>
*  &lt;li>.classname for single class search will trigger &lt;tt>getElementsByClassName&lt;/tt>&lt;/li>
*  &lt;li>@elementName for a single name attribute search will trigger &lt;tt>getElementsByName&lt;/tt>&lt;/li>
*  &lt;li>=tagName for a single tag name search will trigger &lt;tt>getElementsByTagName&lt;/tt>&lt;/li>
*  &lt;/ul>
*
*  Any others queries will be treated through &lt;tt>querySelectorAll&lt;/tt>. For single queries,
*  using the above functions will gnerally be faster than &lt;tt>querySelectorAll&lt;/tt>.
*
*  &lt;tt>Q&lt;/tt> tweaks the query so you can perform id search in node subset.
*
*  #### Creating and enhancing syntax
*
*  If the first parameter is empty, &lt;tt>Q&lt;/tt> will return an HtmlElement with an
*  underlying [DocumentFragment]{@link DocumentFragment}.
*  You can use &lt;tt>Q&lt;/tt> as an alias for [Element constructor]{@link elementify.Element}
*  with prepending a &lt;tt>+&lt;/tt> on the string node description or providing
*  a valid Element node created with &lt;tt>document.createElement()&lt;/tt>.
*
*  Any element node provided to &lt;tt>Q&lt;/tt> will be returned enhanced.
*  Any HtmlElement or Collection will be returned as is.
*
*
*  @method elementify.Q
*  @since 1.0.0
*  @version 1.0.0
*  @author Liqueur de Toile &lt;contact@liqueurdetoile.com>
*
*  @param {Element|Node|String} [s] Element definition or search query
*  @param {Element|Node|String|ArrayObject} [e] Element options or search context
*  @returns {Collection|HtmlElement}
*/
function Q(s, e) {
  var q, r;

  if (typeof s === 'undefined') return new Element();
  if (s.element) return s;
  if (s.nodeType &amp;&amp; s.nodeType === 1) return new Element(s, e);
  if (s[0] === '+') return new Element(s.slice(1), e);

  if (typeof e === 'undefined') {e = document;} else if (e.node) {
    e = e.node;
    // Let ID search into a node
    if (s[0] === '#') s = s.replace('#', '[id="') + '"]';
  }

  try {
    q = e[ {
      '#': 'getElementById',
      '.': 'getElementsByClassName',
      '@': 'getElementsByName',
      '=': 'getElementsByTagName'
    }[ s[0] ] ](s.slice(1));
  } catch (ex) {
    try {
      q = e.querySelectorAll(s);
    } catch (ex) { console.log(e); }
  }

  if (q === null) return new Collection();

  if (typeof q !== 'undefined' &amp;&amp; typeof q.length !== 'undefined') {
    if (q.nodeName &amp;&amp; q.nodeName === 'FORM') return new Element(q);
    if (q.length > 1) {
      r = new Collection();
      r.query = s;
      for (let i = 0; i &lt; q.length; i++) r.push(new Element(q.item([i])));
    } else if (q.length === 1) {
      r = new Element(q.item([0]));
    } else return new Element();
  } else r = new Element(q);
  return r;
}

export default Q;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Feb 19 2018 12:08:44 GMT+0100 (Paris, Madrid) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
